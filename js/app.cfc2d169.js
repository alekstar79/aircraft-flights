(function(){var e={2942:function(e,t,n){"use strict";var a=n(9242),l=n(1373),i=n(3396),o=n(4870),r=n(7139);function u({index:e}){const t=(0,r.oR)(),n=t.getters.airplanes[e],a=n=>{t.commit("UPDATE_SIDE_NUMBER",{index:e,number:n})},l=(n,a,l)=>{t.commit("UPDATE_FLY_DATA",{index:e,value:n,field:a,id:l})},i=()=>{t.commit("REMOVE_FLIGHT",{index:e})},o=()=>{t.commit("ADD_FLIGHT",{index:e})};return{airplane:n,updateSideNumber:a,updateFlyData:l,removeFlight:i,addFlight:o}}var s={__name:"InputFlyData",props:["index"],setup(e){const t=e,{airplane:n,updateSideNumber:a,updateFlyData:l,removeFlight:r,addFlight:s}=u(t);return(e,t)=>{const u=(0,i.up)("v-text-field"),c=(0,i.up)("v-card-title"),d=(0,i.up)("v-responsive"),p=(0,i.up)("v-card-item"),f=(0,i.up)("v-icon"),v=(0,i.up)("v-btn"),m=(0,i.up)("v-card-actions"),g=(0,i.up)("v-card"),w=(0,i.Q2)("maxlen");return(0,i.wg)(),(0,i.j4)(g,{class:"mx-auto","max-width":"786",variant:"outlined"},{default:(0,i.w5)((()=>[(0,i.Wm)(c,{class:"input-fly-data__title"},{default:(0,i.w5)((()=>[(0,i.wy)((0,i.Wm)(u,{label:"Бортовой номер","model-value":(0,o.SU)(n).sideNumber,"onUpdate:modelValue":(0,o.SU)(a),variant:"outlined",density:"compact","hide-details":""},null,8,["model-value","onUpdate:modelValue"]),[[w,8]])])),_:1}),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)((0,o.SU)(n).flightsTime,((e,t)=>((0,i.wg)(),(0,i.j4)(p,{class:"input-fly-data__item",key:t},{default:(0,i.w5)((()=>[(0,i.Wm)(d,{"max-width":"49%"},{default:(0,i.w5)((()=>[(0,i.Wm)(u,{label:"Вылет","model-value":e.departure,"onUpdate:modelValue":e=>(0,o.SU)(l)(e,"departure",t),variant:"outlined",density:"compact",type:"datetime-local","hide-details":""},null,8,["model-value","onUpdate:modelValue"])])),_:2},1024),(0,i.Wm)(d,{"max-width":"49%"},{default:(0,i.w5)((()=>[(0,i.Wm)(u,{label:"Посадка","model-value":e.landing,"onUpdate:modelValue":e=>(0,o.SU)(l)(e,"landing",t),variant:"outlined",density:"compact",type:"datetime-local","hide-details":""},null,8,["model-value","onUpdate:modelValue"])])),_:2},1024)])),_:2},1024)))),128)),(0,i.Wm)(m,null,{default:(0,i.w5)((()=>[(0,i.Wm)(v,{onClick:(0,o.SU)(s),color:"teal-accent-4",variant:"outlined"},{default:(0,i.w5)((()=>[(0,i.Wm)(f,{icon:"mdi-airplane",start:""}),(0,i.Uk)(" Добавить перелет ")])),_:1},8,["onClick"]),(0,i.Wm)(v,{onClick:(0,o.SU)(r),color:"teal-accent-4",variant:"outlined"},{default:(0,i.w5)((()=>[(0,i.Wm)(f,{icon:"mdi-airplane",start:""}),(0,i.Uk)(" Удалить перелет ")])),_:1},8,["onClick"])])),_:1})])),_:1})}}};const c=s;var d=c;function p(){const e=(0,r.oR)(),t=e.getters.airplanes,n=()=>{e.commit("REMOVE_AIRPLANE")},a=()=>{e.commit("ADD_AIRPLANE")};return{airplanes:t,removeAirplane:n,addAirplane:a}}var f={__name:"InputFlyList",setup(e){const{airplanes:t,removeAirplane:n,addAirplane:a}=p();return(e,l)=>{const r=(0,i.up)("v-col"),u=(0,i.up)("v-icon"),s=(0,i.up)("v-btn"),c=(0,i.up)("v-card-actions"),p=(0,i.up)("v-card"),f=(0,i.up)("v-row"),v=(0,i.up)("v-container");return(0,i.wg)(),(0,i.j4)(v,{class:"schedule__airplanes"},{default:(0,i.w5)((()=>[(0,i.Wm)(f,{class:"d-flex flex-column","align-content":"center"},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)((0,o.SU)(t),((e,t)=>((0,i.wg)(),(0,i.j4)(r,{key:t,sm:"12"},{default:(0,i.w5)((()=>[(0,i.Wm)((0,o.SU)(d),{airplane:e,index:t},null,8,["airplane","index"])])),_:2},1024)))),128)),(0,i.Wm)(r,{cols:"auto"},{default:(0,i.w5)((()=>[(0,i.Wm)(p,{class:"add-airplane__action mx-auto","max-width":"786",variant:"outlined"},{default:(0,i.w5)((()=>[(0,i.Wm)(c,null,{default:(0,i.w5)((()=>[(0,i.Wm)(s,{onClick:(0,o.SU)(a),variant:"flat",color:"teal-accent-4"},{default:(0,i.w5)((()=>[(0,i.Wm)(u,{icon:"mdi-airplane",start:""}),(0,i.Uk)(" Добавить воздушное судно ")])),_:1},8,["onClick"]),(0,i.Wm)(s,{onClick:(0,o.SU)(n),variant:"flat",color:"teal-accent-4"},{default:(0,i.w5)((()=>[(0,i.Wm)(u,{icon:"mdi-airplane",start:""}),(0,i.Uk)(" Удалить воздушное судно ")])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})}}};const v=f;var m=v;n(7658);const g=32,w=200,h=1e3,_=100,b=40,y={lockMovementX:!0,lockMovementY:!0,lockRotation:!0,lockScalingX:!0,lockScalingY:!0,hasControls:!1,hasBorders:!1},x=e=>`M: ${e.toFixed(2)}`;function k(e,t="rgba(80,90,120,.1)"){e.clear().setBackgroundColor(t,e.requestRenderAllBound)}function D(e,t={},n){return new n.Text(e,{hoverCursor:"default",fontFamily:"Roboto",fontSize:g,originY:"center",originX:"left",fill:"#000000",scaleX:1,scaleY:1,...t,...y})}function E(e={},t){return new t.Rect({hoverCursor:"pointer",originY:"center",originX:"left",fill:"#00BFA5",height:30,scaleX:1,scaleY:1,stroke:"#000000",strokeWidth:1,...e,...y})}function S({departure:e,landing:t}){const n=e?new Date(e).getTime():null,a=t?new Date(t).getTime():null;return{start:n,stop:a}}const U={day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"};function A(e,t){if(!e||!t)return"";const n=(new Date(e)-new Date(t))/1e3;let a,l;return a=Math.floor(n/60/60),l=Math.floor(n/60)-60*a,[a,l].map((e=>e.toString().padStart(2,"0"))).join(":")}function W(e){return e?new Date(e).toLocaleString("ru-RU",U):""}function F(e,t=0,n=1080,a=0){return("undefined"===typeof e||Number.isNaN(e))&&(e=a),e>n?n:e<t?t:e+.5|0}function T(){const e=new Date;return new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime()}function L(e,t){const n=(0,i.f3)("fabric"),a=new n.Canvas(e),l=(0,r.oR)(),o=(0,i.f3)("emitter"),u=D("РЕЙСОВ НЕТ",{left:280,top:175},n),s=T();let c,d,p,f=1;k(a),a.selection=!1,o.on("close:popup",(()=>{c&&c.set("fill","#00BFA5"),a.requestRenderAll()})),a.on("mouse:wheel",(({e:e})=>{e.preventDefault(),a.forEachObject((t=>{switch(!0){case"rect"===t.type:p=e.deltaY||e.wheelDelta,d=p>0?.05:-.05,f=t.scaleX+d,f>1&&(f=1),f<.25&&(f=.25);break;case"scale"===t.sid:break}})),a.requestRenderAll()}));const v=e=>{k(a);const l=a.getHeight(),i=a.getWidth(),o=[],r=(e,l)=>{if(!e.sideNumber)return;let i=60+b*l;o.push(D(e.sideNumber,{left:20,top:i},n)),e.flightsTime.forEach((function(r,u){if(!r.departure||!r.landing)return;let{start:d,stop:p}=S(r);d-=s,p-=s,d/=h*_,p/=h*_;const f=p-d,v=d+w*(u<=0?1:0),m={airplane:e,index:l,idx:u,left:v,top:i,width:f},g=E(m,n);g.on("mousedown",(function({target:e}){c&&c.set("fill","#00BFA5"),e.set("fill","#8EAAFF"),t("range:click",{...m,left:v+a._offset.left,top:i+a._offset.top}),c=e})),o.push(g)}))};if(e.forEach(r),o.length)return a.add(...o,D(x(f),{fontSize:g/2,top:l-g/2,left:i-70,sid:"scale"},n));a.add(u)};v(l.getters.airplanes),(0,i.YP)(l.getters.airplanes,v,{deep:!0})}var R={__name:"TimeLine",setup(e){const t=(0,r.oR)(),n=(0,i.Fl)((()=>t.state.origin)),a=(0,i.Fl)((()=>t.state.scaled)),l=(0,i.Fl)((()=>{const{width:e=0}=n.value||{};return e})),o=(0,i.Fl)((()=>{const{width:e=0}=a.value||{};return e})),u=(0,i.Fl)((()=>l.value?l.value/5:0)),s=(0,i.Fl)((()=>o.value?o.value/u.value:0)),c=()=>{let e=Math.ceil(u.value),t=e<72?e-3:e-6,n=200;return(0,i.h)("div",{class:{ruler:!0}},Array.from({length:e},((e,a)=>{const l={style:{}},o=[];return a>0&&(n+=s.value-1),a%6===0?(l.class="milestone",o.push((0,i.h)("span",{class:["label track"]},a<=t?10*a:[]))):l.class=a%3===0?"major":"common",l.class+=" track",l.style["left"]=n+"px",(0,i.h)("span",l,o)})))};return(e,t)=>((0,i.wg)(),(0,i.j4)(c))}};const H=R;var j=H,O={__name:"DrawingSchedule",emits:["range:click"],setup(e,{emit:t}){const n=(0,o.iH)(null);return(0,i.bv)((()=>{L(n.value,t)})),(e,t)=>{const a=(0,i.up)("v-col"),l=(0,i.up)("v-row"),o=(0,i.up)("v-responsive"),r=(0,i.up)("v-container");return(0,i.wg)(),(0,i.j4)(r,{class:"schedule__drawings"},{default:(0,i.w5)((()=>[(0,i.Wm)(o,{class:"d-flex align-center text-center"},{default:(0,i.w5)((()=>[(0,i.Wm)(l,{class:"d-flex align-center justify-center"},{default:(0,i.w5)((()=>[(0,i.Wm)(a,{cols:"auto"},{default:(0,i.w5)((()=>[(0,i.Wm)(j),(0,i._)("canvas",{width:"788",height:"375",ref_key:"canvas",ref:n},null,512)])),_:1})])),_:1})])),_:1})])),_:1})}}},C=n(89);const Y=(0,C.Z)(O,[["__scopeId","data-v-2b009235"]]);var M=Y,N=n(2268);function P(e,t=0){const n=(0,i.Fl)((()=>({start:"mousedown",move:"mousemove",end:"mouseup"}))),a=(0,o.iH)(null),l=(0,o.iH)(null),r=(0,o.iH)(!1),u=(0,o.iH)(0),s=(0,o.iH)(0),c=(0,o.iH)(1);function d(e,n){return{left:2===t?a.value:e,top:1===t?l.value:n}}function p({left:t,top:n}){const i=window.innerHeight-e.value?.clientHeight||0,o=window.innerWidth-e.value?.clientWidth||0;a.value=F(t,0,o),l.value=F(n,0,i)}function f(e,t){p(d(e-e%c.value,t-t%c.value))}function v(){f(e.value?.offsetLeft||0,e.value?.offsetTop||0)}function m(){const e=document.documentElement,{move:t,end:a}=n.value;r.value?(e.removeEventListener(t,w),e.removeEventListener(a,g)):(e.addEventListener(t,w),e.addEventListener(a,g)),r.value=!r.value}function g(){m()}function w(e){f(e.pageX-u.value,e.pageY-s.value),_(e)}function h(t){try{u.value=t.pageX-e.value.offsetLeft,s.value=t.pageY-e.value.offsetTop,m()}catch(t){}}function _(e){e.preventDefault()}return document.body.addEventListener("selectstart",_),document.addEventListener("mousedown",h),document.addEventListener("dragstart",_),window.addEventListener("resize",v),{left:a,top:l}}var I={__name:"PopupFlyData",props:["flight"],emits:["close:popup"],setup(e,{emit:t}){const n=e,a=(0,r.oR)(),l=(0,i.Fl)((()=>a.state.airplanes[n.flight.index])),u=(0,i.Fl)((()=>a.state.airplanes[n.flight.index].flightsTime.filter(((e,t)=>n.flight.idx===t)))),s=(0,o.iH)({}),c=(0,o.iH)(null),d=(0,o.iH)(null),p=(0,o.iH)(null);let f;return f||(d.value=`${n.flight.left}px`,p.value=`${n.flight.top}px`),(0,i.YP)(a.state.airplanes,(e=>{e[n.flight.index]||t("close:popup")})),(0,i.bv)((async()=>{f=!0,await(0,i.Y3)(),s.value=P(c),(0,i.YP)(s.value,(e=>{d.value=`${e.left}px`,p.value=`${e.top}px`}))})),(e,n)=>{const a=(0,i.up)("v-btn"),r=(0,i.up)("v-card-title"),s=(0,i.up)("v-card-text"),f=(0,i.up)("v-card");return(0,i.wg)(),(0,i.iD)("div",{class:"popup-fly-data draggable",style:(0,N.j5)({left:d.value,top:p.value}),ref_key:"root",ref:c},[(0,i.Wm)(f,{width:"300"},{default:(0,i.w5)((()=>[(0,i.Wm)(a,{onClick:n[0]||(n[0]=e=>t("close:popup")),icon:"mdi-window-close",position:"absolute",ripple:!1,variant:"plain"}),(0,i.Wm)(r,{class:"popup-fly-data__title"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,N.zw)((0,o.SU)(l)?.sideNumber||""),1)])),_:1}),(0,i.Wm)(s,{class:"popup-fly-data__content"},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)((0,o.SU)(u),(({departure:e,landing:t},n)=>((0,i.wg)(),(0,i.iD)("div",{class:"popup-fly-data__item",key:n},[(0,i._)("p",null,"Вылет: "+(0,N.zw)((0,o.SU)(W)(e)),1),(0,i._)("p",null,"Посадка: "+(0,N.zw)((0,o.SU)(W)(t)),1),(0,i._)("p",null,"Время в полете: "+(0,N.zw)((0,o.SU)(A)(t,e)),1)])))),128))])),_:1})])),_:1})],4)}}};const V=(0,C.Z)(I,[["__scopeId","data-v-9042fdb2"]]);var X=V,z={__name:"App",setup(e){const t=(0,i.f3)("emitter"),n=(0,o.iH)(null),a=(0,o.iH)(!1),l=e=>{n.value=e,a.value=!0},r=()=>{t.emit("close:popup"),a.value=!1};return(e,t)=>{const u=(0,i.up)("v-main"),s=(0,i.up)("v-app");return(0,i.wg)(),(0,i.j4)(s,null,{default:(0,i.w5)((()=>[(0,i.Wm)(u,null,{default:(0,i.w5)((()=>[(0,i.Wm)((0,o.SU)(m)),(0,i.Wm)((0,o.SU)(M),{"onRange:click":l}),a.value?((0,i.wg)(),(0,i.j4)(X,{key:0,"onClose:popup":r,flight:n.value},null,8,["flight"])):(0,i.kq)("",!0)])),_:1})])),_:1})}}};const B=z;var q=B;const $=new Date;function G(e,t){let n;return n=new Date($.getUTCFullYear(),$.getMonth(),$.getDate(),e,t-$.getTimezoneOffset()),n=n.toISOString(),n.split(".")[0]}const K=[{sideNumber:"RA-12345",flightsTime:[{departure:G(1,15,0),landing:G(5,35,0)},{departure:G(13,0,0),landing:G(17,25,0)}]},{sideNumber:"KX-75139",flightsTime:[{departure:G(5,5,0),landing:G(12,45,0)}]}];var Z=K;const Q=(0,r.MT)({state:()=>({color:"accent",origin:{width:790},scaled:{width:642},airplanes:Z}),getters:{airplanes:e=>e.airplanes},mutations:{UPDATE_SIDE_NUMBER(e,{number:t,index:n}){e.airplanes[n].sideNumber=t},UPDATE_FLY_DATA(e,{value:t,field:n,id:a,index:l}){e.airplanes[l].flightsTime.some(((e,l)=>l===a&&(e[n]=t,!0)))},REMOVE_FLIGHT(e,{index:t}){e.airplanes[t].flightsTime.splice(-1,1)},ADD_FLIGHT(e,{index:t}){let n=e.airplanes[t].flightsTime;n=[...n,{departure:"",landing:""}],e.airplanes[t].flightsTime=n},REMOVE_AIRPLANE(e){e.airplanes.splice(-1,1)},ADD_AIRPLANE(e){e.airplanes.push({sideNumber:"",flightsTime:[{departure:"",landing:""}]})}}});var J=Q,ee=n(3657),te=n.n(ee);function ne(){te().load({google:{families:["Roboto:100,300,400,500,700,900&display=swap"]}})}var ae=n(8600),le=n(1850),ie=n(8957);n(9773);const oe=(0,ie.Rd)({components:le,directives:ae});var re=oe,ue=n(7968),se={install:(e,t)=>{e.provide("fabric",ue.fabric),e.config.globalProperties.fabric=e=>new ue.fabric.Canvas(e,t),e.directive("fabric",{mounted(e){e.fabric=new ue.fabric.Canvas(e,t)}})}};const ce=new Map;function de(e,t){e=e.querySelector(".v-field__input"),e.removeEventListener("input",ce.get(e));const n=()=>{const n=e.value.slice(0,t.value);n!==e.value&&(e.value=n,e.dispatchEvent(new Event("input")))};n(),ce.set(e,n),e.addEventListener("input",n)}function pe(e){e.removeEventListener("input",ce.get(e)),ce.delete(e)}var fe={mounted:de,updated:de,unmounted:pe};ne();const ve=(0,a.ri)(q),me=(0,l.Z)();ve.provide("emitter",me),ve.use(se,{preserveObjectStacking:!0}),ve.use(re),ve.use(J),ve.directive("maxlen",fe),ve.mount("#app")},5269:function(){},6759:function(){},6272:function(){}},t={};function n(a){var l=t[a];if(void 0!==l)return l.exports;var i=t[a]={exports:{}};return e[a](i,i.exports,n),i.exports}n.m=e,function(){var e=[];n.O=function(t,a,l,i){if(!a){var o=1/0;for(c=0;c<e.length;c++){a=e[c][0],l=e[c][1],i=e[c][2];for(var r=!0,u=0;u<a.length;u++)(!1&i||o>=i)&&Object.keys(n.O).every((function(e){return n.O[e](a[u])}))?a.splice(u--,1):(r=!1,i<o&&(o=i));if(r){e.splice(c--,1);var s=l();void 0!==s&&(t=s)}}return t}i=i||0;for(var c=e.length;c>0&&e[c-1][2]>i;c--)e[c]=e[c-1];e[c]=[a,l,i]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,a){var l,i,o=a[0],r=a[1],u=a[2],s=0;if(o.some((function(t){return 0!==e[t]}))){for(l in r)n.o(r,l)&&(n.m[l]=r[l]);if(u)var c=u(n)}for(t&&t(a);s<o.length;s++)i=o[s],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return n.O(c)},a=self["webpackChunkaircraft_flights"]=self["webpackChunkaircraft_flights"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=n.O(void 0,[998],(function(){return n(2942)}));a=n.O(a)})();
//# sourceMappingURL=app.cfc2d169.js.map